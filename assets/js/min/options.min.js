$(document).ready((function(){chrome.storage.local.get(["options"],(function(e){null!=e.options&&1==e.options.darkMode&&($("body").addClass("dark"),$(".js-darkMode").prop("checked",!0))})),$(".js-tabLink").click((function(e){var t=$(".js-tabLink").index(this);$(".js-tabContent").each((function(){$(this).removeClass("active")})),$(".js-tabLink").each((function(){$(this).removeClass("active")})),$(".js-tabContent").eq(t).addClass("active"),$(this).addClass("active")})),$(".js-tabLink").eq(0).trigger("click"),$(".js-position-checkbox").change((function(){$(this).is(":checked")?($(".position-test").addClass("active"),$(".position-dev").removeClass("active")):($(".position-dev").addClass("active"),$(".position-test").removeClass("active"))}));var e,t,s,a,n=$(".js-displayed-team-name").text();function o(e){var t=Math.floor(e/6e4%60),s=Math.floor(e/36e5).toFixed(0);return(s<10?"0":"")+s+":"+(t<10?"0":"")+t}$(".js-team-name").keyup((function(){$(".js-displayed-team-name").text(n+$(this).val())})),chrome.storage.local.get(["personalInfo"],(function(e){null!=e.personalInfo&&(1==e.personalInfo.position&&$(".js-position-checkbox").attr("checked",!0),e.personalInfo.teamsName.length>0&&($(".js-team-name").val(e.personalInfo.teamsName),$(".js-displayed-team-name").text("Working on : "+e.personalInfo.teamsName)),e.personalInfo.sprintWeeks>0&&$("input[name=rb][value='"+e.personalInfo.sprintWeeks+"']").prop("checked",!0))})),$(".js-darkMode").click((function(){if($(this).is(":checked")){$("body").addClass("dark");var e={darkMode:1};chrome.storage.local.set({options:e})}else $("body").removeClass("dark"),e={darkMode:0},chrome.storage.local.set({options:e})})),e=0,t="",s="",$(".js-save-info").click((function(){$(".js-position-checkbox").is(":checked")&&(e=1),$(".js-team-name").val().length>0&&(t=$(".js-team-name").val()),document.querySelector('input[name="rb"]:checked')&&(s=parseInt(document.querySelector('input[name="rb"]:checked').value));var a={position:e,teamsName:t,sprintWeeks:s};chrome.storage.local.set({personalInfo:a}),$(this).addClass("saved",{duration:500}),setTimeout((function(){$(".js-save-info").removeClass("saved",{duration:500})}),4e3)})),a=document.getElementById("deleteModal"),$(".js-delete-tasks").click((function(){a.style.display="block"})),$(".js-cancelReset, .js-closeDelModal").click((function(){a.style.display="none"})),window.onclick=function(e){e.target==a&&(a.style.display="none")},$(".js-resetConfirmation").click((function(){chrome.storage.local.set({tasks:{current:{anyCurrent:!1},oldTasks:[],lastTaskId:0}},(function(){$(".js-resetConfirmation, .js-cancelReset").addClass("hidden"),$(".js-tasksDeleted").removeClass("hidden"),setTimeout((function(){document.getElementById("deleteModal").style.display="none",$(".js-resetConfirmation, .js-cancelReset").removeClass("hidden"),$(".js-tasksDeleted").addClass("hidden")}),2e3)}))})),$(".js-export-tasks").click((function(){var e=(new Date).getTime(),t=[["Task Name","Task Time(hr:min)"]];chrome.storage.local.get(["tasks"],(function(s){if(s.tasks.current.anyCurrent){timer=e-s.tasks.current.date,timer=o(timer);var a=[s.tasks.current.name,timer];t.push(a)}for(var n=0;n<s.tasks.oldTasks.length;n++){crnttime=o(s.tasks.oldTasks[n].totalSpended);var i=[s.tasks.oldTasks[n].name,crnttime];t.push(i)}!function(e,t){for(var s=function(e){for(var t="",s=0;s<e.length;s++){var a=null===e[s]?"":e[s].toString();e[s]instanceof Date&&(a=e[s].toLocaleString());var n=a.replace(/"/g,'""');n.search(/("|,|\n)/g)>=0&&(n='"'+n+'"'),s>0&&(t+=","),t+=n}return t+"\n"},a="",n=0;n<t.length;n++)a+=s(t[n]);var o=new Blob([a],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");if(void 0!==i.download){var c=URL.createObjectURL(o);i.setAttribute("href",c),i.setAttribute("download",e),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)}}("sprint-tasks.csv",t)}))}))}));